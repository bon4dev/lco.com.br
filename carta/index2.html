<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carta de Apresentação</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<style type="text/css">
    .dados {
        padding: 20px;
        width: 650px;
        margin: 0 auto;
    }


    .print {
        display: none;
        padding: 15px;
        width: 900px;
        margin: 0 auto;
    }

    @media print {
        .print {
            display: block;
        }

        .dados {
            display: none;
        }
    }
</style>

<body>
    <div class="dados">
        <div class="container mt-5">
            <h1 class="mb-4">Carta de Apresentação</h1>
            <form>
                <div class="form-group">
                    <label for="nomeAluno">Nome do Aluno</label>
                    <input type="text" class="form-control" id="nomeAluno" required>
                </div>
                <div class="form-group">
                    <label for="matriculaAluno">Matrícula do Aluno</label>
                    <input type="number" class="form-control" id="matriculaAluno" required>
                </div>
                <div class="form-group">
                    <label for="cargaHoraria">Carga Horária</label>
                    <input type="number" class="form-control" id="cargaHoraria" required>
                </div>
                <div class="form-group">
                    <label for="curso">Selecione o nome do curso</label>
                    <select class="form-control" id="curso" required>
                        <option value="" disabled selected></option>
                    </select>
                </div>
                <div><span></span></div>
                <button type="button" class="btn btn-primary" onclick="imprimir()">Imprimir</button>
            </form>
        </div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            fetch('cursos.txt')
                .then(response => response.text())
                .then(data => {
                    const linhas = data.split('\n');
                    const cursoSelect = document.getElementById('curso');
                    linhas.forEach(linha => {
                        const colunas = linha.split(',');
                        if (colunas.length >= 2) {
                            const option = document.createElement('option');
                            option.value = colunas[0].trim();
                            option.textContent = colunas[1].trim();
                            cursoSelect.appendChild(option);
                        }
                    });
                })
                .catch(error => console.error('Erro ao carregar os cursos:', error));
        });
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        function imprimir() {

            var nomeAluno = document.getElementById('nomeAluno').value;
            console.log('aki');
            var matriculaAluno = document.getElementById('matriculaAluno').value;
            var cargaHoraria = document.getElementById('cargaHoraria').value;
            var curso = document.getElementById('curso').value;

            if (!nomeAluno || !matriculaAluno || !cargaHoraria || !curso) {
                return;
            }
            /*
                        document.getElementById('print_nome_aluno').innerHTML = document.getElementById('nomeAluno').value.toUpperCase();
                        document.getElementById('print_matricula_aluno').innerHTML = document.getElementById('matriculaAluno').value;
                        document.getElementById('print_nome_curso').innerHTML = document.getElementById('curso').value;
                        document.getElementById('print_carga_horaria').innerHTML = document.getElementById('cargaHoraria').value;
                        document.getElementById('print_data_atual').innerHTML = "Joinville, " + dataAtual();
          
            

            document.getElementById('print_nome_professor').innerHTML = "Dados do orientador de estágio: " + document.getElementById('nome_professor').value;
            document.getElementById('print_matricula_professor').innerHTML = "Matrícula: " + document.getElementById('matricula_professor').value;
            document.getElementById('print_email_professor').innerHTML = "E-mail: " + document.getElementById('email_professor').value;
  */

            buscarDados();
            return;
            window.print();
        }

        function dataAtual() {
            let data = new Date();
            let dia = data.getDate();
            let mes = data.getMonth() + 1; // Os meses em JavaScript são indexados a partir de zero, então adicionamos 1 para obter o mês correto
            let ano = data.getFullYear();

            // Adicionando zero à esquerda se o dia ou o mês forem menores que 10
            if (dia < 10) {
                dia = '0' + dia;
            }
            if (mes < 10) {
                mes = '0' + mes;
            }

            return dia + '/' + mes + '/' + ano;
        }

        async function buscarDados() {
            const selecao = document.getElementById('curso');
            const chaveSelecionada = selecao.value;

            try {
                const resposta = await fetch('cursos.txt');
                const texto = await resposta.text();

                const linhas = texto.split('\n');
                let resultado = null;

                for (const linha of linhas) {
                    const colunas = linha.split(',');

                    if (colunas[0] === chaveSelecionada) {
                        resultado = colunas;
                        break;
                    }
                }

                if (resultado) {
                    console.log('Linha encontrada:', resultado);
                    // Aqui você pode fazer o que quiser com o resultado, como armazená-lo em uma matriz ou exibi-lo na página
                } else {
                    console.log('Chave não encontrada.');
                }
            } catch (erro) {
                console.error('Erro ao buscar dados:', erro);
            }
        }
    </script>
</body>

</html>